# Workflow : Code Review

ChaÃ®ne de production pour la revue de code.

## DÃ©clencheurs

- Pull Request / Merge Request crÃ©Ã©e
- Demande de review explicite
- Code prÃªt pour validation

## Ã‰tapes

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  1. CONTEXT                                                      â”‚
â”‚     Comprendre le contexte et l'objectif du changement          â”‚
â”‚     Agent: skills/quality/code-review.md                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  2. ANALYSIS                                                     â”‚
â”‚     Analyser le code en profondeur                              â”‚
â”‚     Agent: skills/quality/code-review.md                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  3. SECURITY                                                     â”‚
â”‚     VÃ©rifier les aspects sÃ©curitÃ©                               â”‚
â”‚     Agent: skills/quality/security-check.md                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  4. FEEDBACK                                                     â”‚
â”‚     Fournir le feedback structurÃ©                               â”‚
â”‚     Agent: skills/quality/code-review.md                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
                   [SI CORRECTIONS DEMANDÃ‰ES]
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  5. CORRECTIONS                                                  â”‚
â”‚     Appliquer les corrections                                   â”‚
â”‚     Agents: skills/development/[...].md                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  6. VALIDATION                                                   â”‚
â”‚     Valider les corrections et approuver                        â”‚
â”‚     Agent: skills/quality/code-review.md                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## DÃ©tail des Ã©tapes

### 1. Context

**Comprendre avant de juger**

```yaml
questions:
  - Quel est l'objectif de ce changement ?
  - Quelle issue/ticket rÃ©sout-il ?
  - Y a-t-il des contraintes particuliÃ¨res ?
  - Quels sont les critÃ¨res d'acceptation ?

gather:
  - Description de la PR
  - Ticket liÃ©
  - Commits inclus
  - Fichiers modifiÃ©s (liste)
```

### 2. Analysis

**Agent** : `skills/quality/code-review.md`

**Checklist d'analyse** :

```markdown
## Fonctionnel
- [ ] Le code fait ce qu'il est censÃ© faire
- [ ] Les edge cases sont gÃ©rÃ©s
- [ ] Les erreurs sont gÃ©rÃ©es proprement

## QualitÃ©
- [ ] Code lisible et comprÃ©hensible
- [ ] Nommage clair (variables, fonctions)
- [ ] Pas de duplication inutile
- [ ] ComplexitÃ© raisonnable

## Architecture
- [ ] CohÃ©rent avec l'architecture existante
- [ ] Pas de couplage excessif
- [ ] ResponsabilitÃ©s bien sÃ©parÃ©es

## Tests
- [ ] Tests prÃ©sents et pertinents
- [ ] Couverture suffisante
- [ ] Tests lisibles

## Performance
- [ ] Pas de problÃ¨me de performance Ã©vident
- [ ] Pas de N+1 queries
- [ ] Pas de boucles inutiles

## MaintenabilitÃ©
- [ ] Facile Ã  modifier ultÃ©rieurement
- [ ] Documentation si logique complexe
- [ ] Pas de dette technique ajoutÃ©e
```

### 3. Security

**Agent** : `skills/quality/security-check.md`

**Checklist sÃ©curitÃ©** :

```markdown
## Injection
- [ ] Pas d'injection SQL possible
- [ ] Pas d'injection de commande
- [ ] Inputs validÃ©s et sanitizÃ©s

## Authentification/Autorisation
- [ ] VÃ©rifications de permissions prÃ©sentes
- [ ] Pas d'exposition de donnÃ©es sensibles
- [ ] Tokens/sessions gÃ©rÃ©s correctement

## DonnÃ©es sensibles
- [ ] Pas de secrets en dur
- [ ] Pas de logs de donnÃ©es sensibles
- [ ] DonnÃ©es personnelles protÃ©gÃ©es

## XSS/CSRF
- [ ] Outputs Ã©chappÃ©s correctement
- [ ] Protection CSRF si nÃ©cessaire
```

### 4. Feedback

**Format du feedback** :

```markdown
## Review : [Titre PR]

### RÃ©sumÃ©
[1-2 phrases rÃ©sumant l'impression gÃ©nÃ©rale]

### DÃ©cision
ğŸŸ¢ **Approved** | ğŸŸ¡ **Changes Requested** | ğŸ”´ **Request Changes (Blocking)**

### Points positifs
- [Ce qui est bien fait]

### Corrections requises (bloquant)
- [ ] **[fichier:ligne]** : [Description du problÃ¨me et solution attendue]

### Suggestions (non bloquant)
- [ ] **[fichier:ligne]** : [Suggestion d'amÃ©lioration]

### Questions
- [ ] [Question qui nÃ©cessite clarification]

### Nitpicks (optionnel)
- [DÃ©tails mineurs, style, prÃ©fÃ©rences personnelles]
```

**CatÃ©gorisation des commentaires** :

| PrÃ©fixe | Signification | Bloquant |
|---------|---------------|----------|
| `ğŸ”´ CRITICAL` | Bug, faille sÃ©curitÃ©, erreur grave | Oui |
| `ğŸŸ  REQUIRED` | Doit Ãªtre corrigÃ© avant merge | Oui |
| `ğŸŸ¡ SUGGESTION` | AmÃ©lioration recommandÃ©e | Non |
| `ğŸ”µ QUESTION` | Demande de clarification | DÃ©pend |
| `âšª NITPICK` | PrÃ©fÃ©rence personnelle | Non |

### 5. Corrections

**Agents** : `skills/development/[...].md`

Si des corrections sont demandÃ©es :

```
1. Analyser chaque commentaire
2. ImplÃ©menter les corrections requises
3. RÃ©pondre aux questions
4. ConsidÃ©rer les suggestions
5. Pusher les modifications
6. Demander re-review
```

### 6. Validation

**Agent** : `skills/quality/code-review.md`

```yaml
re_review:
  - VÃ©rifier que chaque correction requise est faite
  - VÃ©rifier que les rÃ©ponses sont satisfaisantes
  - Tests toujours passants

decision:
  approved: true
  ready_to_merge: true
```

## Bonnes pratiques

### Pour le reviewer

```
âœ“ ÃŠtre constructif, pas destructif
âœ“ Expliquer le "pourquoi", pas juste le "quoi"
âœ“ Proposer des solutions, pas juste des critiques
âœ“ Distinguer opinions et standards
âœ“ RÃ©pondre rapidement (< 24h)
âœ“ ÃŠtre cohÃ©rent dans les standards
```

### Pour l'auteur

```
âœ“ PR de taille raisonnable (< 400 lignes idÃ©alement)
âœ“ Description claire de l'objectif
âœ“ Self-review avant de demander review
âœ“ Tests inclus
âœ“ RÃ©pondre Ã  tous les commentaires
âœ“ Ne pas prendre les critiques personnellement
```

## MÃ©triques

```yaml
targets:
  time_to_first_review: "< 4h"
  time_to_approval: "< 24h"
  review_iterations: "< 3"

track:
  - Temps moyen de review
  - Nombre de corrections par PR
  - Taux de bugs post-merge
```
